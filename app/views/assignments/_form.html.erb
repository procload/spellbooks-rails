<%= form_with(model: assignment, class: "bg-white rounded-lg shadow-soft p-6 mb-8 space-y-6", data: { controller: "random-details" }) do |form| %>
  <% if assignment.errors.any? %>
    <div class="bg-destructive/10 text-destructive px-3 py-2 font-medium rounded-lg">
      <h2><%= pluralize(assignment.errors.count, "error") %> prohibited this assignment from being saved:</h2>
      <ul>
        <% assignment.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="space-y-6">
    <div>
      <%= form.label :title, class: "block text-lg font-medium mb-2" %>
      <%= form.text_field :title,
          class: "w-full p-3 text-lg border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-spellbooks-element",
          required: true,
          placeholder: "Enter assignment title",
          data: { random_details_target: "title" } %>
    </div>

    <!-- Subject -->
    <div>
      <%= form.label :subject, class: "block text-lg font-medium mb-2" %>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-2xl">
        <%= render "components/subject_selector/subject_selector",
            name: "assignment[subject]",
            value: "Math",
            label: "Math",
            checked: true,
            icon: subject_icon(:math) %>

        <%= render "components/subject_selector/subject_selector",
            name: "assignment[subject]",
            value: "Science",
            label: "Science",
            icon: subject_icon(:science) %>

        <%= render "components/subject_selector/subject_selector",
            name: "assignment[subject]",
            value: "English",
            label: "English",
            icon: subject_icon(:english) %>

        <%= render "components/subject_selector/subject_selector",
            name: "assignment[subject]",
            value: "History",
            label: "History",
            icon: subject_icon(:history) %>

        <%= render "components/subject_selector/subject_selector",
            name: "assignment[subject]",
            value: "Art",
            label: "Art",
            icon: subject_icon(:art) %>
      </div>
    </div>

    <!-- Grade Level -->
    <div>
      <%= form.label :grade_level, class: "block text-lg font-medium mb-2" %>
      <%= render "components/segmented_control/segmented_control",
          name: "assignment[grade_level]",
          options: [
            { label: 'K', value: '0' },
            { label: '1st', value: '1' },
            { label: '2nd', value: '2' },
            { label: '3rd', value: '3' },
            { label: '4th', value: '4' },
            { label: '5th', value: '5' },
            { label: '6th', value: '6' },
            { label: '7th', value: '7' },
            { label: '8th', value: '8' },
            { label: '9th', value: '9' },
            { label: '10th', value: '10' },
            { label: '11th', value: '11' },
            { label: '12th', value: '12' }
          ] %>
    </div>

    <!-- Difficulty -->
    <div>
      <%= form.label :difficulty, class: "block text-lg font-medium mb-2" %>
      <%= render "components/segmented_control/segmented_control",
          name: "assignment[difficulty]",
          options: [
            { label: 'Easy', value: 'Easy', checked: true },
            { label: 'Medium', value: 'Medium' },
            { label: 'Hard', value: 'Hard' },
            { label: 'Advanced', value: 'Advanced' }
          ] %>
    </div>

    <!-- Number of Questions -->
    <div>
      <%= form.label :number_of_questions, class: "block text-lg font-medium mb-2" %>
      <%= form.number_field :number_of_questions,
          in: 1..100,
          class: "w-full p-3 text-lg border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-spellbooks-element",
          placeholder: "Enter number of questions",
          data: { random_details_target: "questions" } %>
    </div>

    <!-- Interests -->
    <div>
      <%= form.label :interests, class: "block text-lg font-medium mb-2" %>
      <%= render "components/interests_form", form: form %>
    </div>

    <!-- Submit Buttons -->
    <div class="flex justify-end space-x-4">
      <%= transparent_button "Fill Random Details", type: "button", data: { action: "click->random-details#fillRandom" } %>
      <%= transparent_button "Cancel", href: root_path, data: { turbo_frame: "_top" } %>
      <%= primary_button "Create Assignment", type: "submit" %>
    </div>
  </div>
<% end %>