<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">
      <%= Current.user.teacher? ? "My Created Assignments" : "My Assigned Work" %>
    </h1>
    
    <% if Current.user.teacher? %>
      <%= link_to "Create New Assignment", new_assignment_path, 
          class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" %>
    <% end %>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <% @assignments.each do |assignment| %>
      <div class="border rounded-lg shadow-lg p-6 bg-white">
        <h2 class="text-xl font-semibold mb-2"><%= assignment.title %></h2>
        
        <div class="text-gray-600 mb-4">
          <p>Subject: <%= assignment.subject %></p>
          <p>Grade Level: <%= assignment.grade_level %></p>
          <p>Difficulty: <%= assignment.difficulty %></p>
        </div>

        <% if Current.user.student? %>
          <% assignment_user = assignment.assignment_users.find_by(user: Current.user) %>
          <div class="mb-4">
            <span class="px-2 py-1 rounded text-sm
              <%= case assignment_user&.status
                  when 'completed' then 'bg-green-100 text-green-800'
                  when 'in_progress' then 'bg-yellow-100 text-yellow-800'
                  else 'bg-gray-100 text-gray-800'
                  end %>">
              <%= assignment_user&.status&.titleize || 'Pending' %>
            </span>
          </div>
        <% end %>

        <div class="flex justify-between items-center mt-4">
          <%= link_to "View Details", assignment_path(assignment), 
              class: "text-blue-500 hover:text-blue-700" %>
          
          <% if Current.user.teacher? && assignment.teachers.include?(Current.user) %>
            <div class="flex gap-2">
              <%= link_to "Edit", edit_assignment_path(assignment), 
                  class: "text-yellow-500 hover:text-yellow-700" %>
              <%= button_to "Delete", assignment_path(assignment), 
                  method: :delete,
                  class: "text-red-500 hover:text-red-700",
                  data: { confirm: "Are you sure you want to delete this assignment?" } %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>