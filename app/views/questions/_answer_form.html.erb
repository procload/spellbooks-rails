<% if question.answers.any? %>
  <div class="space-y-2">
    <%= form_with url: check_answer_assignment_question_path(@assignment, question),
                method: :post,
                data: { 
                  controller: "question-submission",
                  action: "question-submission#submit"
                },
                class: "space-y-3" do |f| %>
      
      <%= render "questions/answer_options", 
          question: question, 
          form: f, 
          student_answer: student_answer %>
      
      <div class="mt-4 flex items-center gap-2">
        <%= primary_button "Submit Answer",
            type: "submit",
            disabled: student_answer.present?,
            data: { "question-submission-target": "submitButton" } %>
        
        <%= render "questions/spinner" %>
      </div>
    <% end %>
    
    <%= turbo_frame_tag dom_id(question, :feedback) do %>
      <%= render "questions/feedback", 
          question: question,
          correct: student_answer&.correct,
          explanation: question.explanation if student_answer %>
    <% end %>
  </div>
<% end %>